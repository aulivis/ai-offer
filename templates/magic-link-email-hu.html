<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bel√©p√©si link - Vyndi</title>
  <!--[if mso]>
  <style type="text/css">
    body, table, td {font-family: Arial, sans-serif !important;}
  </style>
  <![endif]-->
</head>
<body style="margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; line-height: 1.6; color: #1a202c; background-color: #f7fafc; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;">
  <!-- Email wrapper -->
  <table role="presentation" width="100%" border="0" cellspacing="0" cellpadding="0" style="background-color: #f7fafc; padding: 20px;">
    <tr>
      <td align="center">
        <!-- Main content container -->
        <table role="presentation" width="600" border="0" cellspacing="0" cellpadding="0" style="max-width: 600px; background-color: #ffffff; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);">
          
          <!-- Header with logo and brand -->
          <tr>
            <td bgcolor="#1c274c" style="background-color: #1c274c; background-image: linear-gradient(135deg, #1c274c 0%, #2d3f6b 100%); padding: 40px 30px; text-align: center;">
              <!-- Logo -->
              <img src="{{ .SiteURL }}/vyndi-logo.png" alt="Vyndi" width="120" height="40" style="display: block; margin: 0 auto 16px; width: 120px; height: auto; max-width: 120px; border: 0;" />
              <!-- Brand name with maximum contrast for light/dark mode compatibility -->
              <h1 style="margin: 0; padding: 0; color: #ffffff !important; font-size: 32px; font-weight: 700; line-height: 1.2; text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3); letter-spacing: -0.5px; mso-color-alt: #ffffff;">
                <span style="color: #ffffff;">Vyndi</span>
              </h1>
              <!-- Tagline with maximum visibility -->
              <p style="margin: 12px 0 0 0; padding: 0; color: #ffffff !important; font-size: 16px; font-weight: 600; letter-spacing: 0.2px; mso-color-alt: #ffffff;">
                <span style="color: #ffffff; opacity: 1;">AI-alap√∫ aj√°nlatk√©sz√≠t√©s</span>
              </p>
            </td>
          </tr>
          
          <!-- Main content card -->
          <tr>
            <td style="background-color: #ffffff; padding: 48px 40px; border: 1px solid #e2e8f0; border-top: 1px solid #e2e8f0;">
              <!-- Greeting -->
              <h2 style="margin: 0 0 16px 0; padding: 0; color: #1c274c; font-size: 28px; font-weight: 700; line-height: 1.3;">√údv√∂zl√ºnk! üëã</h2>
              
              <!-- Main message -->
              <p style="margin: 0 0 32px 0; padding: 0; color: #4a5568; font-size: 16px; line-height: 1.7;">
                Kattints az al√°bbi gombra, hogy bejelentkezz a Vyndi fi√≥kodba. A bel√©p√©si link <strong style="color: #1c274c;">1 √≥r√°n kereszt√ºl √©rv√©nyes</strong>, ut√°na √∫j linket kell k√©rned.
              </p>
              
              <!-- CTA Button -->
              <!-- 
                Note: Using token_hash flow for shorter URLs and better reliability.
                If TokenHash is available (PKCE flow), use it; otherwise fall back to ConfirmationURL (implicit flow).
                Supabase will automatically determine which flow to use based on Site URL configuration.
              -->
              <table role="presentation" width="100%" border="0" cellspacing="0" cellpadding="0" style="margin: 0 0 40px 0;">
                <tr>
                  <td align="center" style="padding: 0;">
                    <table role="presentation" border="0" cellspacing="0" cellpadding="0">
                      <tr>
                        <td align="center" bgcolor="#1c274c" style="border-radius: 8px; padding: 0;">
                          {{ if .TokenHash }}
                          <!-- PKCE flow: Use token_hash for shorter URLs -->
                          <a href="{{ .SiteURL }}/api/auth/confirm?token_hash={{ .TokenHash }}&type=email&next=/dashboard" 
                             style="display: inline-block; padding: 18px 48px; background-color: #1c274c; color: #ffffff; text-decoration: none; font-size: 18px; font-weight: 600; line-height: 1.5; border-radius: 8px; border: 2px solid #1c274c;">
                            Bejelentkez√©s
                          </a>
                          {{ else }}
                          <!-- Fallback to implicit flow if token_hash not available -->
                          <a href="{{ .ConfirmationURL }}" 
                             style="display: inline-block; padding: 18px 48px; background-color: #1c274c; color: #ffffff; text-decoration: none; font-size: 18px; font-weight: 600; line-height: 1.5; border-radius: 8px; border: 2px solid #1c274c;">
                            Bejelentkez√©s
                          </a>
                          {{ end }}
                        </td>
                      </tr>
                    </table>
                  </td>
                </tr>
              </table>
              
              <!-- Alternative link (if button doesn't work) -->
              <div style="margin: 0 0 40px 0; padding: 20px; background-color: #f7fafc; border-radius: 8px; border-left: 4px solid #1c274c;">
                <p style="margin: 0 0 12px 0; padding: 0; color: #4a5568; font-size: 14px; font-weight: 600;">
                  üí° Ha a gomb nem m≈±k√∂dik
                </p>
                <p style="margin: 0 0 8px 0; padding: 0; color: #718096; font-size: 13px; line-height: 1.6;">
                  M√°sold be az al√°bbi linket a b√∂ng√©sz≈ëdbe (a teljes linket, ne csak egy r√©sz√©t):
                </p>
                <p style="margin: 0; padding: 12px; background-color: #ffffff; border-radius: 4px; border: 1px solid #e2e8f0; overflow-x: auto;">
                  {{ if .TokenHash }}
                  <!-- PKCE flow: Use token_hash for shorter URLs -->
                  <a href="{{ .SiteURL }}/api/auth/confirm?token_hash={{ .TokenHash }}&type=email&next=/dashboard" 
                     style="color: #1c274c; text-decoration: underline; font-size: 11px; font-family: 'Courier New', Courier, monospace; display: block; word-break: break-word; overflow-wrap: break-word; white-space: pre-wrap; line-height: 1.5;">
                    {{ .SiteURL }}/api/auth/confirm?token_hash={{ .TokenHash }}&type=email&next=/dashboard
                  </a>
                  {{ else }}
                  <!-- Fallback to implicit flow if token_hash not available -->
                  <a href="{{ .ConfirmationURL }}" 
                     style="color: #1c274c; text-decoration: underline; font-size: 11px; font-family: 'Courier New', Courier, monospace; display: block; word-break: break-word; overflow-wrap: break-word; white-space: pre-wrap; line-height: 1.5;">
                    {{ .ConfirmationURL }}
                  </a>
                  {{ end }}
                </p>
                <p style="margin: 8px 0 0 0; padding: 0; color: #a0aec0; font-size: 11px; line-height: 1.4;">
                  {{ if .TokenHash }}
                  ‚úÖ A link r√∂vid √©s biztons√°gos. M√°sold be a teljes linket a b√∂ng√©sz≈ëdbe.
                  {{ else }}
                  ‚ö†Ô∏è Fontos: Ha a link t√∫l hossz√∫nak t≈±nik, akkor is m√°sold be a teljes linket. A hossz√∫ linkek biztons√°gosak √©s sz√ºks√©gesek a bejelentkez√©shez.
                  {{ end }}
                </p>
              </div>
              
              <!-- Security notice -->
              <div style="margin: 0; padding: 24px 0 0 0; border-top: 1px solid #e2e8f0;">
                <p style="margin: 0; padding: 0; color: #718096; font-size: 14px; line-height: 1.7;">
                  <strong style="color: #4a5568;">Nem te k√©rted ezt a linket?</strong><br>
                  Ha nem te kezdem√©nyezted ezt a bejelentkez√©st, nyugodtan hagyd figyelmen k√≠v√ºl ezt az e-mailt. A link automatikusan lej√°r, √©s senki m√°s nem f√©rhet hozz√° a fi√≥kodhoz.
                </p>
              </div>
            </td>
          </tr>
          
          <!-- Footer -->
          <tr>
            <td style="background-color: #f7fafc; padding: 32px 40px; text-align: center; border-top: 1px solid #e2e8f0;">
              <p style="margin: 0 0 12px 0; padding: 0; color: #718096; font-size: 14px; font-weight: 600;">
                Vyndi - AI-alap√∫ aj√°nlatk√©sz√≠t√©s percek alatt
              </p>
              <p style="margin: 0; padding: 0;">
                <a href="{{ .SiteURL }}" style="color: #1c274c; text-decoration: none; font-size: 14px; margin: 0 12px;">Weboldal</a>
                <span style="color: #cbd5e0;">|</span>
                <a href="{{ .SiteURL }}/settings" style="color: #1c274c; text-decoration: none; font-size: 14px; margin: 0 12px;">Be√°ll√≠t√°sok</a>
              </p>
            </td>
          </tr>
          
        </table>
        
        <!-- Unsubscribe / Help text -->
        <table role="presentation" width="600" border="0" cellspacing="0" cellpadding="0" style="max-width: 600px; margin-top: 24px;">
          <tr>
            <td align="center" style="padding: 0 20px;">
              <p style="margin: 0; padding: 0; color: #a0aec0; font-size: 12px; line-height: 1.6;">
                Ha b√°rmilyen k√©rd√©sed van, √≠rj nek√ºnk: <a href="mailto:hello@vyndi.hu" style="color: #1c274c; text-decoration: underline;">hello@vyndi.hu</a>
              </p>
            </td>
          </tr>
        </table>
        
      </td>
    </tr>
  </table>
</body>
</html>
